<!-- Author: Elijah Newman-Gomez -->
<!DOCTYPE html>
<html lang="en">
<head>
		<title>JumpStart</title>

		<script src="../lib/three.js"></script>
		<script src="../lib/firebase.js"></script>
		<script src="../src/AltOBJMTLLoader.js"></script>
		<script src="../lib/OBJMTLLoader.js"></script>
		<script src="../lib/MTLLoader.js"></script>
		<script src="../src/sync/FirebaseSync.js"></script>
		<!-- <script src="../src/cursor/CursorEvents.js"></script> -->
		<!-- <script src="../src/cursor/AltObjectControls.js"></script> -->
		<link rel="stylesheet" type="text/css" href="myStyle.css">
</head>
<body>

<div id="info">JumpStart</div>

<!-- APPEND JUMPSTART.JS TO YOUR BODY ELEMENT -->
<script src="JumpStart.js"></script>

<script>

// (OPTIONAL) CONFIGURE JUMPSTART
var myOptions =
{
	"debugMode": true,
	"legacyLoader": true,
	"worldScale": 1.0,
	"scaleWithEnclosure": true,
	"enabledCursorEvents":
	{
		"cursorDown": true,
		"cursorUp": true,
		"cursorEnter": true,
		"cursorLeave": true,
		"cursorMove": false
	},
	"camera":
	{
		"lookAtOrigin": true,
		"position": new THREE.Vector3(-5.0, 10.0, 30.0),
		//"position": new THREE.Vector3(1.0, 1.0, 2.0),
		"translation": new THREE.Vector3(40.0, 30.0, 180.0)
	},
	"firebase":
	{
//		"rootUrl": "https://jump-start.firebaseio.com/",
//		"appId": "JumpStart",
		"params": { "TRACE": false }
	}
};
JumpStart.setOptions(myOptions);


// DEFINE JUMPSTART'S TWO CALLBACKS

// PURPOSE: The JumpStart globals and your THREE.js scene are ready to use.
function OnPrecache()
{
	// Precache anything that your app needs.
	var myModels = ["models/JumpStart/jewel.obj", "models/JumpStart/grass.obj"];
	JumpStart.loadModels(myModels).then(function() {

		// Finally call JumpStart.doneCaching() to signify you are done.
		// Your OnReady global function wll be called next.
		JumpStart.doneCashing();
	});
}

// PURPOSE: Gets called every time the scene is about to be rendered.
function OnTick()
{
	// do work
}

</script>


<script>

function spinObject()
{
	this.rotateY(1.0 * g_deltaTime);
}

function growObject()
{
	this.scale.multiplyScalar(2.0);
}

function shrinkObject()
{
	this.scale.multiplyScalar(0.5);
}

function hightlightOnObject()
{
	var myColor = new THREE.Color(1.5, 1.5, 1.5);
	this.JumpStart.setTint(myColor);
}

function highlightOffObject()
{
	var myColor = new THREE.Color(1.0, 1.0, 1.0);
	this.JumpStart.setTint(myColor);
}

// ALL YOUR NON-JUMPSTART CODE GOES HERE
// TODO: Make calling the JumpStart.run() command OPTIONAL!! (swap it for a JumpStart.preventDefault())
function OnReady()
{
	// The first user
	if( g_localUser.firstUser )
	{
		// JEWEL BLOCK
		var myInstance = JumpStart.spawnInstance("models/JumpStart/jewel.obj");

		// Do something each render tick.
		myInstance.JumpStart.onTick["spinObject"] = spinObject;

		// Do something when it's clicked.
		myInstance.JumpStart.onCursorDown["growObject"] = growObject;
		myInstance.JumpStart.onCursorUp["shrinkObject"] = shrinkObject;

		// Do something when it's hovered over.
		myInstance.JumpStart.onCursorEnter["hightlightOnObject"] = hightlightOnObject;
		myInstance.JumpStart.onCursorLeave["highlightOffObject"] = highlightOffObject;

		// We are a networked object!!
		JumpStart.addSyncedObject(myInstance);



		// GRASS BLOCK
		var myOtherInstance = JumpStart.spawnInstance("models/JumpStart/grass.obj");

		var offset = new THREE.Vector3(100.0, 0.0, 0.0);
		myOtherInstance.position.add(offset);
		myOtherInstance.scale.multiplyScalar(2.0);

		// Must block line-of-sight to be hoverable!!
		//myOtherInstance.JumpStart.blocksLOS = false;

		// Do something when it's hovered over.
		myOtherInstance.JumpStart.onCursorEnter["hightlightOnObject"] = hightlightOnObject;
		myOtherInstance.JumpStart.onCursorLeave["highlightOffObject"] = highlightOffObject;

		// We are a networked object!!
		JumpStart.addSyncedObject(myOtherInstance);
	}



	// START SIMULATION
	JumpStart.run();
}

</script>

</body>
</html>