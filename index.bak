<!--
	JumpStart
	Version: beta 1.0

	This framework is to make it easier for new developers to get started
	with the AltspaceSDK.  It creates many commonly required THREE.js objects
	as global variables for developers to easily access and use as needed.

	You can get your objects spawned into Altspace with just a couple lines.

	TODO:
		- Clean up code.
		- Update to the new Altspace object/material loaders.
		- Add a "onClick" events that can be attached to objects just like the "onTick" events.
		- Add firebase integration.
		- Add raycasting features.
		- Add physics features.
		- Add collsion detection features.
		- Add automatic syncing of firebase objects on an interval.
		- Add client-side prediction on firebase objects.

	Author: Elijah Newman-Gomez
-->
<!DOCTYPE html>
<html lang="en">
<head>
		<title>JumpStart</title>

		<script src="../lib/three.js"></script>
		<script src="../lib/MTLLoader.js"></script>
		<script src="../lib/OBJMTLLoader.js"></script>
		<script src="../lib/firebase.js"></script>
		<script src="../src/AltOBJMTLLoader.js"></script>
		<script src="../src/sync/FirebaseSync.js"></script>
		<script src="../src/cursor/CursorEvents.js"></script>
		<script src="../src/cursor/AltObjectControls.js"></script>

		<style>
			body {
				background-color: rgba(0, 0, 0, 0);
				margin: 0px;
				overflow: hidden;

				color: #FFFFFF;
				font-family: Monospace;
				font-size: 18px;
				text-align: center;
			}

			#info {
				position: absolute;
				top: 0px;
				width: 100%;
				padding: 10px;
			}
		</style>

</head>
<body>

	<!-- Include JumpStart.js in the BODY of your app. -->
	<script src="JumpStart.js"></script>

	<div id="info"><h1><b>JumpStart</b></h1></div>

<script>

// This function gets called when your app is ready to start.
function OnJumpStartReady()
{
	// Initialize a model (and also a bunch of other stuff since this is our 1st call.)
//	LoadModels("models/JumpStart/jewel.obj", "models/JumpStart/grass.obj").then(StartMyApp);	// Loading models is always asynchronous.
	LoadModels("models/JumpStart/jewel.obj").then(StartMyApp);	// Loading models is always asynchronous.
}

function StartMyApp()
{
	// Spawn an instance of your model into the scene
	var myInstance = SpawnInstance("models/JumpStart/jewel.obj");

	// Let's give it some animation logic to perform each tick.
	myInstance.onTick["spinBehavior"] = function()
	{
		this.rotateY(1.0 * g_DeltaTime);
	};

	// Oops! We forgot to load the grass model!
	// Let's load it now, and then spawn it once it's ready.
	LoadModels("models/JumpStart/grass.obj").then(function()
	{
		// Let's spawn another block.
		var myOtherInstance = SpawnInstance("models/JumpStart/grass.obj");

		// And offset it.
		var offset = new THREE.Vector3(100.0, 0.0, 0.0);
		offset.multiplyScalar(g_WorldScale);

		myOtherInstance.position.add(offset);

		// And scale it.
		var scale = new THREE.Vector3(2.0, 2.0, 2.0);
		scale.multiplyScalar(g_WorldScale);

		myOtherInstance.scale.copy(scale);
	});
}

function OnTick()
{
	// Do your own work here using global variables.
	// All scene objects are in g_Scene.children.
}

</script>

</body>
</html>